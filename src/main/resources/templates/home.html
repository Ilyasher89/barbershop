<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <title>Главная - Парикмахерская</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css" rel="stylesheet">
</head>
<body>
<div class="container mt-5">
    <h1>Парикмахерская</h1>

    <div th:if="${#authorization.expression('isAuthenticated()')}">
        <div class="alert alert-success">
            <h4>
            <span th:if="${#authentication.principal.firstName != null}">
                ✅ Добро пожаловать, <strong th:text="${#authentication.principal.firstName}"></strong>!
            </span>
                <span th:unless="${#authentication.principal.firstName != null}">
                ✅ Добро пожаловать!
            </span>
            </h4>

            <p>Email: <strong th:text="${#authentication.name}"></strong></p>

            <p th:if="${#authentication.principal.fullName != #authentication.name}">
                Полное имя: <strong th:text="${#authentication.principal.fullName}"></strong>
            </p>

            <p>
                Роль:
                <span class="badge bg-info" th:text="${#authentication.principal.role}"></span>
            </p>

            <div class="mt-3">
                <a th:href="@{/client/dashboard}" class="btn btn-primary"
                   th:if="${#authorization.expression('hasRole(''CLIENT'')')}">
                    Личный кабинет клиента
                </a>
                <a th:href="@{/barber/dashboard}" class="btn btn-warning"
                   th:if="${#authorization.expression('hasRole(''BARBER'')')}">
                    Панель парикмахера
                </a>
                <a th:href="@{/admin/dashboard}" class="btn btn-danger"
                   th:if="${#authorization.expression('hasRole(''ADMIN'')')}">
                    Панель администратора
                </a>

                <form th:action="@{/logout}" method="post" class="d-inline">
                    <button type="submit" class="btn btn-outline-dark">Выйти</button>
                </form>
            </div>
        </div>
    </div>

    <div th:unless="${#authorization.expression('isAuthenticated()')}">
        <div class="alert alert-info">
            <h4>Добро пожаловать!</h4>
            <p>Для доступа к системе необходимо войти или зарегистрироваться.</p>
            <a href="/login" class="btn btn-primary">Войти</a>
            <a href="/register" class="btn btn-outline-primary">Зарегистрироваться</a>
        </div>
    </div>

    <div class="mt-4">
        <h3>О системе:</h3>
        <p>Информационно-справочная система парикмахерской позволяет:</p>
        <ul>
            <li>Клиентам - записываться на услуги, просматривать историю посещений</li>
            <li>Парикмахерам - управлять расписанием, просматривать записи</li>
            <li>Администраторам - управлять услугами, мастерами и пользователями</li>
        </ul>

        <p><a href="/about">Об авторе проекта</a></p>
        <p><a href="/api-test">Тестирование API</a></p>
    </div>
</div>
</body>
</html>
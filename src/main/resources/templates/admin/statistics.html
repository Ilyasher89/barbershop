<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <title>–°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ —Å–∏—Å—Ç–µ–º—ã</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css" rel="stylesheet">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.8.1/font/bootstrap-icons.css">
    <style>
        .stat-card {
            border-radius: 10px;
            transition: transform 0.3s;
        }
        .stat-card:hover {
            transform: translateY(-3px);
        }
        .stat-number {
            font-size: 2rem;
            font-weight: bold;
        }
        .stat-label {
            color: #6c757d;
            font-size: 0.9rem;
        }
    </style>
</head>
<body>
<div class="container-fluid py-4">
    <!-- –ó–∞–≥–æ–ª–æ–≤–æ–∫ -->
    <div class="d-flex justify-content-between align-items-center mb-4">
        <div>
            <h1><i class="bi bi-graph-up"></i> –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ —Å–∏—Å—Ç–µ–º—ã</h1>
            <p class="lead">–ê–Ω–∞–ª–∏—Ç–∏–∫–∞ —Ä–∞–±–æ—Ç—ã –ø–∞—Ä–∏–∫–º–∞—Ö–µ—Ä—Å–∫–æ–π</p>
        </div>
        <div>
            <a href="/admin/dashboard" class="btn btn-outline-primary">
                <i class="bi bi-arrow-left"></i> –ù–∞–∑–∞–¥ –≤ –ø–∞–Ω–µ–ª—å
            </a>
        </div>
    </div>

    <!-- –û–±—â–∞—è —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ -->
    <div class="row mb-4">
        <div class="col-12">
            <div class="card">
                <div class="card-header bg-primary text-white">
                    <h5 class="mb-0"><i class="bi bi-house-door"></i> –û–±—â–∞—è —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞</h5>
                </div>
                <div class="card-body">
                    <div class="row">
                        <div class="col-md-3 mb-3">
                            <div class="card stat-card bg-light">
                                <div class="card-body text-center">
                                    <div class="stat-number text-primary" th:text="${generalStats.totalUsers}">0</div>
                                    <div class="stat-label">–í—Å–µ–≥–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π</div>
                                </div>
                            </div>
                        </div>
                        <div class="col-md-3 mb-3">
                            <div class="card stat-card bg-light">
                                <div class="card-body text-center">
                                    <div class="stat-number text-success" th:text="${generalStats.clients}">0</div>
                                    <div class="stat-label">–ö–ª–∏–µ–Ω—Ç–æ–≤</div>
                                </div>
                            </div>
                        </div>
                        <div class="col-md-3 mb-3">
                            <div class="card stat-card bg-light">
                                <div class="card-body text-center">
                                    <div class="stat-number text-warning" th:text="${generalStats.barbers}">0</div>
                                    <div class="stat-label">–ú–∞—Å—Ç–µ—Ä–æ–≤</div>
                                </div>
                            </div>
                        </div>
                        <div class="col-md-3 mb-3">
                            <div class="card stat-card bg-light">
                                <div class="card-body text-center">
                                    <div class="stat-number text-info" th:text="${generalStats.totalAppointments}">0</div>
                                    <div class="stat-label">–í—Å–µ–≥–æ –∑–∞–ø–∏—Å–µ–π</div>
                                </div>
                            </div>
                        </div>
                    </div>

                    <div class="row mt-3">
                        <div class="col-md-4">
                            <div class="card">
                                <div class="card-body">
                                    <h6>–°—Ç–∞—Ç—É—Å—ã –∑–∞–ø–∏—Å–µ–π</h6>
                                    <div>‚úÖ –ó–∞–ø–ª–∞–Ω–∏—Ä–æ–≤–∞–Ω–æ: <strong th:text="${generalStats.scheduledAppointments}">0</strong></div>
                                    <div>üèÅ –ó–∞–≤–µ—Ä—à–µ–Ω–æ: <strong th:text="${generalStats.completedAppointments}">0</strong></div>
                                    <div>‚ùå –û—Ç–º–µ–Ω–µ–Ω–æ: <strong th:text="${generalStats.cancelledAppointments}">0</strong></div>
                                </div>
                            </div>
                        </div>
                        <div class="col-md-4">
                            <div class="card">
                                <div class="card-body">
                                    <h6>–§–∏–Ω–∞–Ω—Å—ã</h6>
                                    <div>üí∞ –û–±—â–∞—è –≤—ã—Ä—É—á–∫–∞: <strong th:text="${generalStats.totalRevenue}">0 ‚ÇΩ</strong></div>
                                    <div>üìä –°—Ä–µ–¥–Ω–∏–π —á–µ–∫: <strong th:text="${generalStats.averageCheck}">0 ‚ÇΩ</strong></div>
                                </div>
                            </div>
                        </div>
                        <div class="col-md-4">
                            <div class="card">
                                <div class="card-body">
                                    <h6>–£—Å–ª—É–≥–∏</h6>
                                    <div>‚úÇÔ∏è –í—Å–µ–≥–æ —É—Å–ª—É–≥: <strong th:text="${generalStats.totalServices}">0</strong></div>
                                    <div>üë®‚Äçüîß –£—Å–ª—É–≥ –º–∞—Å—Ç–µ—Ä–æ–≤: <strong th:text="${generalStats.totalBarberServices}">0</strong></div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –∑–∞ –Ω–µ–¥–µ–ª—é -->
    <div class="row mb-4">
        <div class="col-md-6">
            <div class="card">
                <div class="card-header bg-success text-white">
                    <h5 class="mb-0"><i class="bi bi-calendar-week"></i> –ó–∞ –ø–æ—Å–ª–µ–¥–Ω–∏–µ 7 –¥–Ω–µ–π</h5>
                </div>
                <div class="card-body">
                    <div class="row">
                        <div class="col-md-6 mb-3">
                            <div class="card stat-card">
                                <div class="card-body text-center">
                                    <div class="stat-number text-success" th:text="${weeklyStats.newUsers}">0</div>
                                    <div class="stat-label">–ù–æ–≤—ã—Ö –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π</div>
                                </div>
                            </div>
                        </div>
                        <div class="col-md-6 mb-3">
                            <div class="card stat-card">
                                <div class="card-body text-center">
                                    <div class="stat-number text-primary" th:text="${weeklyStats.newAppointments}">0</div>
                                    <div class="stat-label">–ù–æ–≤—ã—Ö –∑–∞–ø–∏—Å–µ–π</div>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="mt-3">
                        <h6>–í—ã—Ä—É—á–∫–∞ –∑–∞ –Ω–µ–¥–µ–ª—é:</h6>
                        <div class="display-4 text-success" th:text="${weeklyStats.weeklyRevenue}">0 ‚ÇΩ</div>
                    </div>
                </div>
            </div>
        </div>

        <!-- –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –ø–æ –º–∞—Å—Ç–µ—Ä–∞–º -->
        <div class="col-md-6">
            <div class="card h-100">
                <div class="card-header bg-warning text-dark">
                    <h5 class="mb-0"><i class="bi bi-people"></i> –ú–∞—Å—Ç–µ—Ä–∞</h5>
                </div>
                <div class="card-body">
                    <div class="mb-3">
                        <span class="badge bg-warning">–í—Å–µ–≥–æ –º–∞—Å—Ç–µ—Ä–æ–≤: <span th:text="${barberStats.totalBarbers}">0</span></span>
                    </div>
                    <div class="table-responsive">
                        <table class="table table-sm">
                            <thead>
                            <tr>
                                <th>–ú–∞—Å—Ç–µ—Ä</th>
                                <th>–ó–∞–ø–∏—Å–∏</th>
                                <th>–í—ã—Ä—É—á–∫–∞</th>
                            </tr>
                            </thead>
                            <tbody>
                            <tr th:each="barber : ${barberStats.barbers}">
                                <td th:text="${barber.name}">–ò–º—è</td>
                                <td><span class="badge bg-info" th:text="${barber.appointmentsCount}">0</span></td>
                                <td th:text="${barber.revenue}">0 ‚ÇΩ</td>
                            </tr>
                            </tbody>
                        </table>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –ø–æ —É—Å–ª—É–≥–∞–º -->
    <div class="row">
        <div class="col-12">
            <div class="card">
                <div class="card-header bg-info text-white">
                    <h5 class="mb-0"><i class="bi bi-scissors"></i> –ü–æ–ø—É–ª—è—Ä–Ω–æ—Å—Ç—å —É—Å–ª—É–≥</h5>
                </div>
                <div class="card-body">
                    <div class="table-responsive">
                        <table class="table">
                            <thead>
                            <tr>
                                <th>–£—Å–ª—É–≥–∞</th>
                                <th>–¶–µ–Ω–∞</th>
                                <th>–î–ª–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å</th>
                                <th>–ó–∞–ø–∏—Å–µ–π</th>
                                <th>–ú–∞—Å—Ç–µ—Ä–æ–≤</th>
                            </tr>
                            </thead>
                            <tbody>
                            <tr th:each="service : ${serviceStats.services}">
                                <td th:text="${service.name}">–£—Å–ª—É–≥–∞</td>
                                <td th:text="${service.price} + ' ‚ÇΩ'">0 ‚ÇΩ</td>
                                <td><span class="badge bg-secondary" th:text="${service.duration} + ' –º–∏–Ω'">0 –º–∏–Ω</span></td>
                                <td><span class="badge bg-primary" th:text="${service.appointmentsCount}">0</span></td>
                                <td><span class="badge bg-warning" th:text="${service.barbersCount}">0</span></td>
                            </tr>
                            </tbody>
                        </table>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- –ö–Ω–æ–ø–∫–∞ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è -->
    <div class="text-center mt-4">
        <button class="btn btn-primary" onclick="location.reload()">
            <i class="bi bi-arrow-clockwise"></i> –û–±–Ω–æ–≤–∏—Ç—å —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫—É
        </button>
        <small class="text-muted d-block mt-2">–î–∞–Ω–Ω—ã–µ –æ–±–Ω–æ–≤–ª—è—é—Ç—Å—è –≤ —Ä–µ–∞–ª—å–Ω–æ–º –≤—Ä–µ–º–µ–Ω–∏</small>
    </div>
</div>

<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/js/bootstrap.bundle.min.js"></script>
</body>
</html>
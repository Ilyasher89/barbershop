<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
  <meta charset="UTF-8">
  <title th:text="${pageTitle} + ' | –ü–∞—Ä–∏–∫–º–∞—Ö–µ—Ä—Å–∫–∞—è'">–ó–∞–ø–∏—Å–∏ –∫–ª–∏–µ–Ω—Ç–æ–≤</title>
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css" rel="stylesheet">
</head>
<body>
<div class="container mt-4">
  <nav aria-label="breadcrumb">
    <ol class="breadcrumb">
      <li class="breadcrumb-item"><a href="/">–ì–ª–∞–≤–Ω–∞—è</a></li>
      <li class="breadcrumb-item"><a href="/barber/dashboard">–ü–∞–Ω–µ–ª—å –º–∞—Å—Ç–µ—Ä–∞</a></li>
      <li class="breadcrumb-item active" th:text="${pageTitle}"></li>
    </ol>
  </nav>

  <h1 th:text="${pageTitle}"></h1>

  <!-- –ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ –º–∞—Å—Ç–µ—Ä–µ -->
  <div class="alert alert-info mb-4">
    <strong>–ú–∞—Å—Ç–µ—Ä:</strong>
    <span th:text="${barber?.firstName} + ' ' + ${barber?.lastName}">–ò–º—è –§–∞–º–∏–ª–∏—è</span>
    (<span th:text="${barber?.email}">email</span>)
  </div>

  <!-- –ï—Å–ª–∏ –∑–∞–ø–∏—Å–µ–π –Ω–µ—Ç -->
  <div th:if="${appointments == null or appointments.isEmpty()}"
       class="alert alert-warning">
    <h5>üì≠ –ó–∞–ø–∏—Å–µ–π –ø–æ–∫–∞ –Ω–µ—Ç</h5>
    <p>–ö–ª–∏–µ–Ω—Ç—ã –µ—â—ë –Ω–µ –∑–∞–ø–∏—Å—ã–≤–∞–ª–∏—Å—å –Ω–∞ –≤–∞—à–∏ —É—Å–ª—É–≥–∏.</p>
  </div>

  <!-- –ï—Å–ª–∏ –µ—Å—Ç—å –∑–∞–ø–∏—Å–∏ -->
  <div th:if="${appointments != null and not appointments.isEmpty()}">
    <div class="card mt-4">
      <div class="card-body">
        <h5 class="card-title">
          üìã –ó–∞–ø–∏—Å–∏ –∫–ª–∏–µ–Ω—Ç–æ–≤
          <span class="badge bg-primary" th:text="${appointments.size()}">0</span>
        </h5>

        <div class="table-responsive">
          <table class="table table-hover">
            <thead>
            <tr>
              <th>#</th>
              <th>–í—Ä–µ–º—è</th>
              <th>–ö–ª–∏–µ–Ω—Ç</th>
              <th>–£—Å–ª—É–≥–∞</th>
              <th>–¶–µ–Ω–∞</th>
              <th>–°—Ç–∞—Ç—É—Å</th>
            </tr>
            </thead>
            <tbody>
            <tr th:each="app, iter : ${appointments}">
              <td th:text="${iter.index + 1}">1</td>
              <td>
                <!-- –ë–ï–ó–û–ü–ê–°–ù–ê–Ø –ü–†–û–í–ï–†–ö–ê –ù–ê NULL -->
                <div th:if="${app.appointmentDateTime != null}">
                  <strong th:text="${#temporals.format(app.appointmentDateTime, 'dd.MM HH:mm')}">
                    20.01 13:10
                  </strong>
                  <br>
                  <small class="text-muted"
                         th:if="${app.serviceDurationMinutes != null}"
                         th:text="'–î–ª–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å: ' + ${app.serviceDurationMinutes} + ' –º–∏–Ω'">
                    –î–ª–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å: 45 –º–∏–Ω
                  </small>
                </div>
                <div th:if="${app.appointmentDateTime == null}">
                  <span class="text-muted">–í—Ä–µ–º—è –Ω–µ —É–∫–∞–∑–∞–Ω–æ</span>
                </div>
              </td>
              <td th:text="${app.clientName ?: '–ù–µ —É–∫–∞–∑–∞–Ω'}">–ò–≤–∞–Ω –ò–≤–∞–Ω–æ–≤</td>
              <td th:text="${app.serviceName ?: '–ù–µ —É–∫–∞–∑–∞–Ω–∞'}">–°—Ç—Ä–∏–∂–∫–∞</td>
              <td th:text="${app.servicePrice ?: '0'} + ' ‚ÇΩ'">1500 ‚ÇΩ</td>
              <td>
                                    <span th:if="${app.status == 'SCHEDULED'}"
                                          class="badge bg-primary">–ó–∞–ø–ª–∞–Ω–∏—Ä–æ–≤–∞–Ω–∞</span>
                <span th:if="${app.status == 'COMPLETED'}"
                      class="badge bg-success">–ó–∞–≤–µ—Ä—à–µ–Ω–∞</span>
                <span th:if="${app.status == 'CANCELLED'}"
                      class="badge bg-danger">–û—Ç–º–µ–Ω–µ–Ω–∞</span>
                <span th:if="${app.status != null and app.status != 'SCHEDULED' and app.status != 'COMPLETED' and app.status != 'CANCELLED'}"
                      class="badge bg-secondary" th:text="${app.status}">
                                    </span>
              </td>
            </tr>
            </tbody>
          </table>
        </div>
      </div>
    </div>
  </div>

  <!-- –î–µ–π—Å—Ç–≤–∏—è -->
  <div class="mt-4">
    <a href="/barber/dashboard" class="btn btn-primary">‚Üê –ù–∞–∑–∞–¥ –≤ –ø–∞–Ω–µ–ª—å</a>
    <button class="btn btn-outline-secondary ms-2" onclick="location.reload()">
      üîÑ –û–±–Ω–æ–≤–∏—Ç—å —Å–ø–∏—Å–æ–∫
    </button>
  </div>
</div>

</body>
</html>
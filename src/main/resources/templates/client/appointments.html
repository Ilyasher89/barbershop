<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <title>–ú–æ–∏ –∑–∞–ø–∏—Å–∏</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css" rel="stylesheet">
</head>
<body>
<div class="container mt-4">
    <nav aria-label="breadcrumb">
        <ol class="breadcrumb">
            <li class="breadcrumb-item"><a href="/">–ì–ª–∞–≤–Ω–∞—è</a></li>
            <li class="breadcrumb-item"><a href="/client/dashboard">–õ–∏—á–Ω—ã–π –∫–∞–±–∏–Ω–µ—Ç</a></li>
            <li class="breadcrumb-item active">–ú–æ–∏ –∑–∞–ø–∏—Å–∏</li>
        </ol>
    </nav>

    <h1>–ú–æ–∏ –∑–∞–ø–∏—Å–∏</h1>

    <!-- –ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ -->
    <div class="alert alert-info mb-4">
        <strong>–ö–ª–∏–µ–Ω—Ç:</strong>
        <span th:text="${user?.firstName} + ' ' + ${user?.lastName}">–ò–º—è –§–∞–º–∏–ª–∏—è</span>
        (<span th:text="${user?.email}">email</span>)
    </div>

    <!-- –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ - –ü–†–û–°–¢–ê–Ø -->
    <div class="row mb-4" th:if="${appointments != null}">
        <div class="col-md-4">
            <div class="p-3 border rounded text-center">
                <h3 th:text="${appointments.size()}">0</h3>
                <small class="text-muted">–í—Å–µ–≥–æ –∑–∞–ø–∏—Å–µ–π</small>
            </div>
        </div>
    </div>

    <!-- –ï—Å–ª–∏ –∑–∞–ø–∏—Å–µ–π –Ω–µ—Ç -->
    <div th:if="${appointments == null or appointments.isEmpty()}"
         class="alert alert-warning">
        <h5>üóìÔ∏è –£ –≤–∞—Å –ø–æ–∫–∞ –Ω–µ—Ç –∑–∞–ø–∏—Å–µ–π</h5>
        <p>–î–ª—è —Å–æ–∑–¥–∞–Ω–∏—è –∑–∞–ø–∏—Å–∏ –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ
            <a href="/api-test.html" target="_blank">—Ç–µ—Å—Ç–æ–≤—É—é —Å—Ç—Ä–∞–Ω–∏—Ü—É API</a>.
        </p>
    </div>

    <!-- –ï—Å–ª–∏ –µ—Å—Ç—å –∑–∞–ø–∏—Å–∏ - –ü–†–û–°–¢–ê–Ø —Ç–∞–±–ª–∏—Ü–∞ -->
    <div th:if="${appointments != null and not appointments.isEmpty()}">
        <div class="table-responsive">
            <table class="table table-hover">
                <thead>
                <tr>
                    <th>#</th>
                    <th>–î–∞—Ç–∞ –∏ –≤—Ä–µ–º—è</th>
                    <th>–£—Å–ª—É–≥–∞</th>
                    <th>–ú–∞—Å—Ç–µ—Ä</th>
                    <th>–°—Ç–∞—Ç—É—Å</th>
                    <th>–î–µ–π—Å—Ç–≤–∏—è</th>
                </tr>
                </thead>
                <tbody>
                <tr th:each="app, iter : ${appointments}">
                    <td th:text="${iter.index + 1}">1</td>
                    <td th:text="${app.appointmentDateTime}">2024-01-20T10:00:00</td>
                    <td th:text="${app.serviceName}">–ú—É–∂—Å–∫–∞—è —Å—Ç—Ä–∏–∂–∫–∞</td>
                    <td th:text="${app.barberName}">–ò–≤–∞–Ω –ü–∞—Ä–∏–∫–º–∞—Ö–µ—Ä–æ–≤</td>
                    <td>
                            <span th:if="${app.status == 'SCHEDULED'}"
                                  class="badge bg-primary">–ó–∞–ø–ª–∞–Ω–∏—Ä–æ–≤–∞–Ω–∞</span>
                        <span th:if="${app.status == 'COMPLETED'}"
                              class="badge bg-success">–ó–∞–≤–µ—Ä—à–µ–Ω–∞</span>
                        <span th:if="${app.status == 'CANCELLED'}"
                              class="badge bg-danger">–û—Ç–º–µ–Ω–µ–Ω–∞</span>
                        <span th:if="${app.status == 'NO_SHOW'}"
                              class="badge bg-warning">–ù–µ —è–≤–∏–ª—Å—è</span>
                    </td>
                    <td>
                        <div th:if="${app.status == 'SCHEDULED'}">
                            <form th:action="@{/client/appointments/{id}/cancel(id=${app.id})}"
                                  method="post"
                                  onsubmit="return confirm('–û—Ç–º–µ–Ω–∏—Ç—å –∑–∞–ø–∏—Å—å –Ω–∞ ${app.serviceName}?')">
                                <button type="submit" class="btn btn-sm btn-outline-danger">
                                    ‚ùå –û—Ç–º–µ–Ω–∏—Ç—å
                                </button>
                            </form>
                        </div>
                        <div th:if="${app.status != 'SCHEDULED'}">
                            <span class="text-muted">‚Äî</span>
                        </div>
                    </td>
                </tr>
                </tbody>
            </table>
        </div>
    </div>

    <div class="mt-4">
        <a href="/client/dashboard" class="btn btn-primary">‚Üê –ù–∞–∑–∞–¥ –≤ –∫–∞–±–∏–Ω–µ—Ç</a>
    </div>
</div>
</body>
</html>